<% notifly = Notifly::Engine.routes.url_helpers %>
var notiflyCounterRequested;

var _notiflyGetCounter = function (notiflyPath) {
  var $counter = $('#notifly-counter');
  var $notifly = $('#notifly');

  if (!notiflyCounterRequested) {
    $.ajax({
      url: '<%= notifly.counter_notifications_path %>',
      type: 'GET',
      error: _notiflyHandleCounterError
    });
  }
};


var _notiflyHandleCounterError = function () {
  notiflyCounterRequested = false;
};

$(document).ready(function() {
  _notiflyGetCounter();
});