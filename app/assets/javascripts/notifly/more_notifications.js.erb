<% notifly = Notifly::Engine.routes.url_helpers %>

var _notiflyMoreNotifications = function () {
  var $notifly = $('#notifly-notifications-content');

  if($notifly.length !== 0) {
    $notifly.find('#notifly-more-notifications-link').click(function () {
      $.ajax({
        url: '<%= notifly.notifications_path %>',
        data: {
          scope: 'older',
          reference_notification_id: notiflyLastNotification,
          mark_as_seen: $notifly.hasClass('open')
        },
        type: 'GET'
      });
    });
  }
};

$(document).ready(function() {
  _notiflyMoreNotifications();
});
