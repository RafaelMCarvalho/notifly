<% rendered_notifications = render partial: 'notifly/layouts/index',
  locals: { notifications: @notifications } %>

<% if @notifications.any? %>
  $('#notifly-notifications-content .loading').remove();

  <% if @scope_param == 'older' %>
    $('#notifly-notifications-content').append("<%= j rendered_notifications %>");

    notiflyLastNotification = <%= @notifications.last.id %>;

  <% else %>

    $('#notifly-notifications-content').prepend("<%= j rendered_notifications %>");

    notiflyFirstNotification = <%= @notifications.first.id %>;

    if (notiflyLastNotification == undefined)
      notiflyLastNotification = <%= @notifications.last.id %>;

  <% end %>
<% end %>

$('#notifly-counter').html("<%= j(render 'notifly/layouts/counter', counter: @counter)%>");
$('#notifly-icon').html("<%= j notifly_icon(@counter > 0) %>")